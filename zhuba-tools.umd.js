!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["zhuba-tools"]={},e.React)}(this,(function(e,t){"use strict";const o=(e,t,r="children",n=0,c)=>{for(const l of e)t(l,n,c),l[r]&&Array.isArray(l[r])&&o(l[r],t,r,n+1,l)},r=e=>{if(e.length<2)return e;const t=[],o=[],n=e.splice(0,1);for(const r of e)r>n?o.push(r):t.push(r);return r(t).concat(n,r(o))};var n=(e=>(e[e.IOS=1]="IOS",e[e.Android=2]="Android",e[e.Windows=3]="Windows",e[e.MacOS=4]="MacOS",e[e.Other=5]="Other",e))(n||{});const c=(e=0,t=8)=>{const o=-1===e?document.documentElement.scrollHeight-window.innerHeight:e,r=document.documentElement.scrollTop||document.body.scrollTop;(-1===e||r<o)&&r<document.documentElement.scrollHeight-window.innerHeight?(window.requestAnimationFrame((()=>{c(e,t)})),window.scrollTo(0,r+(o-r)/t)):r>o&&(window.requestAnimationFrame((()=>{c(e,t)})),window.scrollTo(0,r-(r-o)/t))},l=(e=6,t="u_")=>{const o="abcdefhijkmnprstwxyz0123456789";let r="";for(let n=0;n<e;n++)r+=o.charAt(Math.floor(30*Math.random()));return t+r};function a(e){return"[object Object]"===Object.prototype.toString.call(e)}const s=(e,t=new WeakMap)=>{if(!a(e))throw TypeError("arguments must be Object");if(t.has(e))return t.get(e);const o={};for(const r of Object.keys(e)){const n=e[r];"object"!=typeof n||null===n?o[r]=n:Array.isArray(n)?o[r]=[...n]:n instanceof Set?o[r]=new Set([...n]):n instanceof Map?o[r]=new Map([...n]):(t.set(n,n),o[r]=s(n,t))}return o},i=(e,t)=>{if(e===t)return!0;const o=typeof e;if(o!==typeof t)return!1;if("object"!==o||null===e||null===t)return e===t;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!i(e[o],t[o]))return!1;return!0}const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const c of r)if(!n.includes(c)||!i(e[c],t[c]))return!1;return!0};const u=e=>{if(null===e||"object"!=typeof e||Array.isArray(e))return e;const t={};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const r=o.replace(/_(\w)/g,(function(e,t){return t.toUpperCase()})),n=e[o];t[r]="object"==typeof n&&null!==n?u(n):n}return t},d=(e,t=2)=>(Math.round((parseFloat(e)+Number.EPSILON)*Math.pow(10,t))/Math.pow(10,t)).toFixed(t),g={formatMoney:(e,t="",o=2)=>d(e,o).replace(/\B(?=(\d{3})+\b)/g,",").replace(/^/,`${t}`)};var m=(e=>(e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL",e))(m||{});e.IDCardCheck=e=>/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(e),e.LogLevel=m,e.OSType=n,e.argumentsSerializate=e=>Object.keys(e).map((t=>{const o=e[t],r="string"==typeof o||"number"==typeof o||"boolean"==typeof o?encodeURIComponent(o.toString()):encodeURIComponent(JSON.stringify(o));return`${encodeURIComponent(t)}=${r}`})).join("&"),e.bottomVisible=()=>document.documentElement.clientHeight+window.scrollY>=(document.documentElement.scrollHeight||document.documentElement.clientHeight),e.commafy=e=>e.toString().includes(".")?e.toLocaleString():e.toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,"),e.convertToCamelCase=u,e.copy=s,e.copyTableDataListener=e=>{const t=(null==e?void 0:e.cleanupFunction)||(e=>e.replace(/\s+/g," ")),o=e=>{var o;const r=null==(o=window.getSelection())?void 0:o.toString();if(r){const o=t(r);e.preventDefault(),navigator.clipboard.writeText(o).catch((e=>{}))}};return document.addEventListener("copy",o),()=>{document.removeEventListener("copy",o)}},e.createScrollControl=()=>{let e=0,t=null;const o=e=>{const t=document.body.style;Object.assign(t,e)};return{preventScroll:()=>{e=window.scrollY,t=document.body.style.cssText?{...document.body.style}:null,o({overflowY:"hidden",position:"fixed",width:"100%",top:-e+"px"})},recoverScroll:()=>{o(null!==t?t:{overflowY:"",position:"",width:"",top:""}),window.scrollTo(0,e)}}},e.debounce=(e,t=1e3,o=!1)=>{let r=null;return(...n)=>{const c=o&&!r;r&&clearTimeout(r),r=setTimeout((()=>{r=null,o||e(...n)}),t),c&&e(...n)}},e.downloadFile=async(e,t,o,r="get")=>{try{const n=new URLSearchParams(t).toString(),c="get"===r?`${e}?${n}`:e,l=await fetch(c,{method:r,..."post"===r&&{body:JSON.stringify(t)}});if(!l.ok)throw new Error(`Network response was not ok, status: ${l.status}`);const a=l.headers.get("content-disposition");if(!a)return;let s="";a.lastIndexOf(".")&&(o||(o=decodeURI(a.substring(a.indexOf("=")+1,a.lastIndexOf(".")))),s=a.substring(a.lastIndexOf("."),a.length));const i=await l.blob(),u=window.URL.createObjectURL(i),d=document.createElement("a");d.style.display="none",d.href=u,d.setAttribute("download",o+s),document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(n){}},e.emailCheck=e=>/^([A-Za-z0-9_\-\\.])+\\@([A-Za-z0-9_\-\\.])+\.([A-Za-z]{2,4})$/.test(e),e.exitFullscreen=()=>{(null==document?void 0:document.exitFullscreen)&&document.exitFullscreen()},e.findLcs=(e,t)=>{const o=e.length,r=t.length,n=Array.from({length:o+1},(()=>new Array(r+1).fill(0)));for(let l=1;l<=o;l++)for(let o=1;o<=r;o++)e[l-1]===t[o-1]?n[l][o]=n[l-1][o-1]+1:n[l][o]=Math.max(n[l-1][o],n[l][o-1]);let c="";for(let l=o,a=r;l>0&&a>0;)e[l-1]===t[a-1]?(c=e[l-1]+c,l--,a--):n[l-1][a]>n[l][a-1]?l--:a--;return c},e.foreachTree=o,e.format=g,e.formatToFixed=d,e.fuzzyQuery=(e,t,o="name")=>{const r=Array.isArray(t)?t.map((e=>new RegExp(e))):[new RegExp(t)],n=Array.isArray(o)?o:[o],c=new Set;for(const l of e)for(const e of n)for(const t of r)if(t.test(String(l[e]))){c.add(l);break}return Array.from(c)},e.getBatteryStatus=async()=>{if(!navigator.getBattery)throw new Error("Battery status is not supported by this browser.");const e=await navigator.getBattery();return{charging:e.charging,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime,level:e.level}},e.getCurrentPosition=()=>new Promise(((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const{latitude:o,longitude:r,accuracy:n,altitude:c,altitudeAccuracy:l,speed:a,heading:s}=t.coords;e({timestamp:t.timestamp,latitude:o,longitude:r,accuracy:n,altitude:c,altitudeAccuracy:l,speed:a,heading:s})}),(e=>{t(e)})):t(new Error("Geolocation is not supported by this browser."))})),e.getOSType=()=>{const e=navigator.userAgent,t=e.includes("Android")||e.includes("Linux"),o=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),r=e.includes("Windows"),n=e.includes("Macintosh");return o?1:t?2:r?3:n?4:5},e.getRandomColor=(e="hex")=>{const t=()=>Math.floor(256*Math.random());switch(e){case"hex":return`#${Array.from({length:6},(()=>"0123456789ABCDEF"[Math.floor(16*Math.random())])).join("")}`;case"rgb":return`rgb(${t()}, ${t()}, ${t()})`;case"rgba":return`rgba(${t()}, ${t()}, ${t()}, ${Math.random().toFixed(1)})`;default:throw new Error("Unsupported color format")}},e.getTime=()=>(new Date).toLocaleString(),e.getURLParameters=e=>(e.match(/([^?=&]+)(=([^&]*))/g)??[]).reduce(((e,t)=>{const[o,r]=t.split("=");return e[o]=decodeURIComponent(r),e}),{}),e.hideMobile=e=>e.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2"),e.highlight=(e,t)=>{const o=[...t],r=[...e].map((e=>{const t=o.findIndex((t=>t===e));return o[t]=l(),t})).sort(((e,t)=>e-t)),n=[];for(let c=0;c<r.length;c++){const e=r[c];if(n.push(t.charAt(e)),c<r.length-1){const o=r[c+1];o-e>1&&n.push(`<span style="color: #F33131">${t.slice(e+1,o)}</span>`)}else e!==t.length-1&&n.push(`<span style="color: #F33131">${t.slice(e+1)}</span>`)}return n.join("")},e.highlight1=(e,t)=>{const o=[...e];let r=0,n="";for(const c of t)o[r]===c?(n+=c,r++):n+=`<span style="color: #F33131">${c}</span>`;return n},e.isEqual=i,e.isObject=a,e.launchFullscreen=e=>{(null==e?void 0:e.requestFullscreen)?e.requestFullscreen():(null==e?void 0:e.mozRequestFullScreen)?e.mozRequestFullScreen():(null==e?void 0:e.msRequestFullscreen)?e.msRequestFullscreen():(null==e?void 0:e.webkitRequestFullScreen)&&e.webkitRequestFullScreen()},e.merge=function e(t,o){if(!a(t))return o;if(!a(o))return t;const r=s(t),n=s(o);return Object.keys(n).forEach((t=>{const o=r[t],c=n[t];Array.isArray(o)&&Array.isArray(c)?r[t]=o.concat(c):a(o)&&a(c)?r[t]=e(o,c):r[t]=c??r[t]})),r},e.mobileCheck=e=>/^[1][3,4,5,7,8][0-9]{9}$/.test(e),e.moneyFormat=(e,t=2,o=".",r=",")=>{const n=Number.parseFloat(e);if(!Number.isFinite(n))return"0";const c=n.toFixed(t),[l,a]=c.split("."),s=l.replace(/\B(?=(\d{3})+(?!\d))/g,r);return a?[s,a].join(o):s},e.noRepeat=e=>e?[...new Set(e)]:[],e.parseUrl=e=>{const t=e.indexOf("?"),o=new URLSearchParams(t>=0?e.substring(t):""),r={};return o.forEach(((e,t)=>{r[t]=/^\d+(\.\d+)?$/.test(e)?parseFloat(e):decodeURIComponent(e)})),r},e.prettyLog=(e={})=>{const{infoColor:t="#909399",errorColor:o="#F56C6C",warningColor:r="#E6A23C",successColor:n="#67C23A",fontSize:c="12px",fontStyle:l="normal",titlePadding:a="1px",titleBackgroundColor:s,messageColor:i="black",messagePaddingLeft:u="5px"}=e,d=(e,t,o)=>{e[0].toUpperCase(),e.slice(1)};let g=null,m=null;const f=(e,t)=>e||("img"===t?new Image:document.createElement("canvas"));return{info:e=>d("info"),error:e=>d("error"),warning:e=>d("warning"),success:e=>d("success"),picture:(e,t,o,r,n,c)=>(async(e,t=1,o=0,r=0,n=0,c=0)=>{g=f(g,"img"),m=f(m,"canvas");const l=g,a=m,s=a.getContext("2d");if(!s)throw new Error("Failed to get canvas context");return l.crossOrigin="anonymous",l.src=e,new Promise(((e,t)=>{l.onload=()=>{const t=n||l.width,i=c||l.height;a.width=t,a.height=i,s.fillStyle="red",s.fillRect(0,0,t,i),s.drawImage(l,o,r,t,i),a.toDataURL("image/png"),e()},l.onerror=()=>{t(new Error("Failed to load image"))}}))})(e,t,o,r,n,c),log:d}},e.quickSort=r,e.scrollTo=c,e.smoothScroll=e=>{var t;null==(t=document.querySelector(e))||t.scrollIntoView({behavior:"smooth"})},e.throttle=(e,t=1e3,o=!1)=>{let r=0,n=null;return(...c)=>{const l=+new Date;o&&!n&&(e.apply(void 0,c),o=!1),l-r>t?(n&&(clearTimeout(n),n=null),r=l,e.apply(void 0,c)):n||o||(n=setTimeout((()=>{n=null,r=+new Date,e.apply(void 0,c)}),t-(l-r)))}},e.timestampToTime=(e=Date.now(),t=!0,o="YYYY-MM-DD HH:mm:ss")=>{const r=new Date(t?e:1e3*e),n=e=>e<10?"0"+e:String(e);return o.replace("YYYY",String(r.getUTCFullYear())).replace("MM",n(r.getUTCMonth()+1)).replace("DD",n(r.getUTCDate())).replace("HH",n(r.getUTCHours())).replace("mm",n(r.getUTCMinutes())).replace("ss",n(r.getUTCSeconds()))},e.turnCase=(e,t=1)=>{if("string"!=typeof e)throw new Error("Input must be a string");if(0===e.length)return e;switch(t){case 1:return e.toUpperCase();case 2:return e.toLowerCase();case 3:return e[0].toUpperCase()+e.substring(1).toLowerCase();default:return e}},e.typeOf=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),e.useBeforeUnload=(e=[])=>{t.useEffect((()=>{const t=t=>{e.some((e=>e))&&(t.preventDefault(),t.returnValue="")};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}}),[e])},e.useDebounce=(e,o=1e3,r=[])=>{const{current:n}=t.useRef({callback:e,timer:null});return t.useEffect((function(){n.callback=e}),[e]),t.useCallback((function(...e){n.timer&&clearTimeout(n.timer),n.timer=setTimeout((()=>{n.callback(...e)}),o)}),r)},e.uuid=l,e.uuid1=function(e="u_"){return e+Date.now().toString(36)+Math.floor(1e4*Math.random()).toString(36)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
